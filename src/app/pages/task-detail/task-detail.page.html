<ion-content [fullscreen]="true">
  <main>
    <div class="form">
      <div class="cancel-button">
        <ion-button (click)="goBack()" fill="clear">Cancel</ion-button>
      </div>

      <div class="form-element">
        <div class="title">Let's give it a name!</div>
        <ion-input [(ngModel)]="task.title"></ion-input>
      </div>

      <div class="form-element">
        <div class="title">When do you usually do this task?</div>
        <app-week-selector
          [biWeekly]="biWeekly"
          [(week)]="task.when"
        ></app-week-selector>
        <div *ngIf="false" class="repeater">
          <small>repeats every two weeks </small>
          <ion-toggle [(ngModel)]="biWeekly"></ion-toggle>
        </div>
      </div>
      <div *ngIf="new" class="form-element">
        <div class="title">When did you last do this?</div>
        <ion-datetime
          displayFormat="DDDD MMM D, YYYY"
          (ionChange)="onChange($event)"
          [max]="now.toISOString()"
          [value]="lastExecution"
        >
        </ion-datetime>
      </div>
    </div>

    <div class="actions">
      <ion-button *ngIf="new" expand="block" color="primary" (click)="create()">Create</ion-button>
      <ion-button *ngIf="!new" expand="block" color="primary" (click)="update()">Update</ion-button>
      <ion-button *ngIf="!new" fill="clear" color="danger" (click)="delete()">Remove this task</ion-button>
    </div>
  </main>
</ion-content>
