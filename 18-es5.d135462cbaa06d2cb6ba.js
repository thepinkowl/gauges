!function(){function n(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function o(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{S4AJ:function(t,i,r){"use strict";r.r(i),r.d(i,"TaskDetailPageModule",(function(){return L}));var c=r("ofXK"),a=r("3Pt+"),s=r("TEn/"),l=r("tyNb"),u=r("mrSG"),g=r("Mwlb"),b=r("fXoL"),f=r("ptfe"),d=function(n,t){return{selected:n,"bi-weekly":t}};function h(n,t){if(1&n){var e=b.Nb();b.Mb(0,"div",1),b.Ub("click",(function(){b.gc(e);var n=t.$implicit;return b.Wb().toggle(n)})),b.mc(1),b.Lb()}if(2&n){var i=t.$implicit,o=b.Wb();b.bc("ngClass",b.ec(2,d,o.week.includes(i.day),!!o.biWeekly)),b.zb(1),b.oc(" ",i.symbol,"\n")}}var m,p=((m=function(){function t(){e(this,t),this.value=[],this.days=[{symbol:"M",day:1},{symbol:"T",day:2},{symbol:"W",day:3},{symbol:"T",day:4},{symbol:"F",day:5},{symbol:"S",day:6},{symbol:"S",day:0}],this.weekChange=new b.n}return o(t,[{key:"ngOnInit",value:function(){}},{key:"toggle",value:function(t){this.week=this.week.includes(t.day)?n(this.week.filter((function(n){return t.day!==n}))):[].concat(n(this.week),[t.day])}},{key:"week",get:function(){return this.value},set:function(n){this.value=n,this.weekChange.emit(n)}}]),t}()).\u0275fac=function(n){return new(n||m)},m.\u0275cmp=b.Db({type:m,selectors:[["app-week-selector"]],inputs:{week:"week",biWeekly:"biWeekly"},outputs:{weekChange:"weekChange"},decls:1,vars:1,consts:[["class","day",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"day",3,"ngClass","click"]],template:function(n,t){1&n&&b.lc(0,h,2,5,"div",0),2&n&&b.bc("ngForOf",t.days)},directives:[c.j,c.i],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .day[_ngcontent-%COMP%]{border-radius:50%;font-weight:700;width:30px;height:30px;display:flex;justify-content:center;align-items:center;cursor:pointer}[_nghost-%COMP%]   .day.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active{background-color:var(--ion-color-light)}[_nghost-%COMP%]   .day.selected.bi-weekly[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active.bi-weekly{background:linear-gradient(90deg,var(--ion-color-light),var(--ion-color-light) 50%,transparent 0)}"]}),m);function k(n,t){if(1&n){var e=b.Nb();b.Mb(0,"div",13),b.Mb(1,"small"),b.mc(2,"repeats every two weeks "),b.Lb(),b.Mb(3,"ion-toggle",6),b.Ub("ngModelChange",(function(n){return b.gc(e),b.Wb().biWeekly=n})),b.Lb(),b.Lb()}if(2&n){var i=b.Wb();b.zb(3),b.bc("ngModel",i.biWeekly)}}function M(n,t){if(1&n){var e=b.Nb();b.Mb(0,"div",4),b.Mb(1,"div",5),b.mc(2,"When did you last do this?"),b.Lb(),b.Mb(3,"ion-datetime",14),b.Ub("ionChange",(function(n){return b.gc(e),b.Wb().onChange(n)})),b.Lb(),b.Lb()}if(2&n){var i=b.Wb();b.zb(3),b.bc("max",i.now.toISOString())("value",i.lastExecution)}}function y(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-button",15),b.Ub("click",(function(){return b.gc(e),b.Wb().create()})),b.mc(1,"Create"),b.Lb()}}function v(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-button",15),b.Ub("click",(function(){return b.gc(e),b.Wb().update()})),b.mc(1,"Update"),b.Lb()}}function C(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-button",16),b.Ub("click",(function(){return b.gc(e),b.Wb().delete()})),b.mc(1,"Remove this task"),b.Lb()}}var w,O,P,_=[{path:"",component:(w=function(){function n(t,i,o){e(this,n),this.nav=t,this.tasksService=i,this.activatedRoute=o,this.when=[5],this.biWeekly=!1,this.now=new Date,this.task=g.a.createEmpty(),this.new=!0,this.lastExecution=this.now.toISOString()}return o(n,[{key:"onChange",value:function(n){var t=new Date(n.detail.value);this.task.lastDone.setTime(t.getTime()),this.task.computeProgress()}},{key:"ngOnInit",value:function(){var n=this;this.activatedRoute.params.subscribe((function(t){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.new="new"===t.id,this.new){n.next=5;break}return n.next=3,this.tasksService.getTaskById(t.id);case 3:e=n.sent,this.task=e,this.lastExecution=e.lastDone.toISOString();case 5:this.task.computeProgress();case 6:case"end":return n.stop()}}),n,this)})))}))}},{key:"goBack",value:function(){this.task.computeProgress(),window.history.length>2?this.nav.back():this.nav.navigateBack("/")}},{key:"create",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.new,!n.t0){n.next=5;break}return n.next=4,this.tasksService.createTask(this.task);case 4:this.goBack();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"update",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.new,n.t0){n.next=5;break}return n.next=4,this.tasksService.updateTask(this.task);case 4:this.goBack();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"delete",value:function(){this.new||(this.tasksService.deleteTask(this.task),this.goBack())}}]),n}(),w.\u0275fac=function(n){return new(n||w)(b.Jb(s.t),b.Jb(f.a),b.Jb(l.a))},w.\u0275cmp=b.Db({type:w,selectors:[["app-task-detail"]],decls:20,vars:9,consts:[[3,"fullscreen"],[1,"form"],[1,"cancel-button"],["fill","clear",3,"click"],[1,"form-element"],[1,"title"],[3,"ngModel","ngModelChange"],[3,"biWeekly","week","weekChange"],["class","repeater",4,"ngIf"],["class","form-element",4,"ngIf"],[1,"actions"],["expand","block","color","primary",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click",4,"ngIf"],[1,"repeater"],["displayFormat","DDDD MMM D, YYYY",3,"max","value","ionChange"],["expand","block","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(n,t){1&n&&(b.Mb(0,"ion-content",0),b.Mb(1,"main"),b.Mb(2,"div",1),b.Mb(3,"div",2),b.Mb(4,"ion-button",3),b.Ub("click",(function(){return t.goBack()})),b.mc(5,"Cancel"),b.Lb(),b.Lb(),b.Mb(6,"div",4),b.Mb(7,"div",5),b.mc(8,"Let's give it a name!"),b.Lb(),b.Mb(9,"ion-input",6),b.Ub("ngModelChange",(function(n){return t.task.title=n})),b.Lb(),b.Lb(),b.Mb(10,"div",4),b.Mb(11,"div",5),b.mc(12,"When do you usually do this task?"),b.Lb(),b.Mb(13,"app-week-selector",7),b.Ub("weekChange",(function(n){return t.task.when=n})),b.Lb(),b.lc(14,k,4,1,"div",8),b.Lb(),b.lc(15,M,4,2,"div",9),b.Lb(),b.Mb(16,"div",10),b.lc(17,y,2,0,"ion-button",11),b.lc(18,v,2,0,"ion-button",11),b.lc(19,C,2,0,"ion-button",12),b.Lb(),b.Lb(),b.Lb()),2&n&&(b.bc("fullscreen",!0),b.zb(9),b.bc("ngModel",t.task.title),b.zb(4),b.bc("biWeekly",t.biWeekly)("week",t.task.when),b.zb(1),b.bc("ngIf",!1),b.zb(1),b.bc("ngIf",t.new),b.zb(2),b.bc("ngIf",t.new),b.zb(1),b.bc("ngIf",!t.new),b.zb(1),b.bc("ngIf",!t.new))},directives:[s.e,s.d,s.i,s.x,a.c,a.d,p,c.k,s.q,s.b,s.f,s.w],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;font-weight:700}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{padding:10px 20px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], [_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-light)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding:0 10px!important}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;max-width:70%;padding:20px 0 10px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   app-week-selector[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]{padding-top:20px;width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 40px}"]}),w)}],x=((P=function n(){e(this,n)}).\u0275mod=b.Hb({type:P}),P.\u0275inj=b.Gb({factory:function(n){return new(n||P)},imports:[[l.i.forChild(_)],l.i]}),P),L=((O=function n(){e(this,n)}).\u0275mod=b.Hb({type:O}),O.\u0275inj=b.Gb({factory:function(n){return new(n||O)},imports:[[c.c,a.a,s.r,x]]}),O)}}])}();