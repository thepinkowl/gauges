function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/2RN":function(e,t,r){"use strict";r.r(t),r.d(t,"DashBoardPageModule",(function(){return N}));var n,a,s=r("ofXK"),i=r("3Pt+"),o=r("TEn/"),c=r("tyNb"),l=r("ycII"),u=r("fXoL"),h=r("ptfe"),g=((n=function(){function e(t,r,n){_classCallCheck(this,e),this.renderer=t,this.domCtrl=r,this.el=n,this.used=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.search=document.getElementById("dashboard-search-bar"),setTimeout((function(){e.used||e.scrollPage(1)}),700)}},{key:"showSearchBar",value:function(){var e=this;this.domCtrl.write((function(){e.renderer.setStyle(e.search,"height","60px")}))}},{key:"hideSearchBar",value:function(){var e=this;this.domCtrl.write((function(){e.renderer.setStyle(e.search,"height","0")}))}},{key:"scrollPage",value:function(e){_toConsumableArray(this.el.nativeElement.shadowRoot.childNodes).find((function(e){return e.className.includes("inner-scroll")})).scrollTop=e}},{key:"onContentScroll",value:function(e){this.used=!0,e.detail.deltaY<0?0===e.detail.scrollTop&&(-1!==e.detail.deltaY?this.scrollPage(1):this.showSearchBar()):e.detail.deltaY>1?this.hideSearchBar():0===e.detail.scrollTop?this.showSearchBar():this.hideSearchBar()}}]),e}()).\u0275fac=function(e){return new(e||n)(u.Kb(u.D),u.Kb(o.c),u.Kb(u.l))},n.\u0275dir=u.Fb({type:n,selectors:[["","appHideHeader",""]],hostBindings:function(e,t){1&e&&u.Vb("ionScroll",(function(e){return t.onContentScroll(e)}))}}),n),f=r("mrSG"),d=r("qfBg"),b=((a=function(){function e(t,r,n){_classCallCheck(this,e),this.alertController=t,this.userService=r,this.tasksService=n,this.messages={green:["all lights green, have a break","you're doing well today!","nothing new here, have a break","all lights are green, bravo!","you are the best!"],orange:["a few things to do and you're done","some chores are due today, take it easy","you're almost done for today","swipe it right!"],red:["swipe them right!","did you forget something?","it's time to do them!","I know you can do it!","let's get some work done today!"]},this.message=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.user=this.userService.getUser(),this.tasksService.getTasks().subscribe((function(t){var r;t&&t.length?(r=t.some((function(e){return e.progress<25}))?e.messages.red:t.some((function(e){return e.progress<50}))?e.messages.orange:e.messages.green,e.message=r[Math.floor(Math.random()*r.length)]):e.message="start by creating a task!"}))}},{key:"setName",value:function(){return Object(f.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.alert&&this.alert.dismiss(),e.next=3,this.alertController.create({header:"How should I call you?",inputs:[{name:"name",type:"text",id:"name",value:this.userService.getUserName(),placeholder:"Name"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(e){var r=e.name;t.userService.setUserName(r)}}]});case 3:this.alert=e.sent,this.alert.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||a)(u.Kb(o.a),u.Kb(d.a),u.Kb(h.a))},a.\u0275cmp=u.Eb({type:a,selectors:[["app-mood-title"]],decls:6,vars:4,consts:[[3,"click"]],template:function(e,t){1&e&&(u.Nb(0,"h1"),u.oc(1," Hey "),u.Nb(2,"span",0),u.Vb("click",(function(){return t.setName()})),u.oc(3),u.Yb(4,"async"),u.Mb(),u.oc(5),u.Mb()),2&e&&(u.Ab(3),u.pc(u.Zb(4,2,t.user).name),u.Ab(2),u.qc(", ",t.message,"\n"))},pipes:[s.b],styles:["[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{width:73%;max-width:350px;font-family:var(--tpo-font-family);font-size:var(--tpo-font-big);font-weight:700;line-height:140%;margin:var(--tpo-margin);margin-top:40px}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),a),p=r("zRHw"),y=r("uWEj");function m(e,t){if(1&e&&u.Lb(0,"app-task-list",6),2&e){var r=u.Xb();u.dc("tasks",r.tasks)}}var k=function(e){return["/category",e]};function v(e,t){if(1&e&&(u.Nb(0,"ion-item",9),u.Nb(1,"ion-grid"),u.Nb(2,"ion-row"),u.oc(3),u.Mb(),u.Nb(4,"ion-row",10),u.Lb(5,"app-gauge",11),u.Mb(),u.Mb(),u.Mb()),2&e){var r=t.$implicit,n=u.Xb(3);u.dc("routerLink",u.fc(3,k,r.cid)),u.Ab(3),u.pc(r.title),u.Ab(2),u.dc("percentage",n.getCategoryProgress(r))}}function C(e,t){if(1&e&&(u.Nb(0,"div"),u.Nb(1,"ion-list-header"),u.Nb(2,"ion-label"),u.oc(3),u.Mb(),u.Mb(),u.nc(4,v,6,5,"ion-item",8),u.Mb()),2&e){var r=t.$implicit,n=u.Xb(2);u.Ab(3),u.pc(r.title),u.Ab(1),u.dc("ngForOf",n.getChildCategories(r))}}function w(e,t){if(1&e&&(u.Nb(0,"ion-list"),u.nc(1,C,5,2,"div",7),u.Lb(2,"app-task-list",6),u.Mb()),2&e){var r=u.Xb();u.Ab(1),u.dc("ngForOf",r.parentCategories),u.Ab(1),u.dc("tasks",r.otherTasks)}}var _,M,T,A=[{path:"",component:(_=function(){function e(t,r){_classCallCheck(this,e),this.tasksService=t,this.categoriesService=r,this.categories=[],this.tasks=[],this.initialTasks=[],this.subs=[],this.showTasksRatherThanCategories=!0}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subs.forEach((function(e){return e.unsubscribe()}))}},{key:"ionViewWillEnter",value:function(){var e=this;this.$tasks=this.tasksService.getTasks(),this.$categories=this.categoriesService.getCategories();var t=this.$tasks.subscribe((function(t){e.initialTasks=t,e.tasks=t})),r=this.$categories.subscribe((function(t){e.initialCategories=t,e.categories=t}));this.subs.push(t,r)}},{key:"getChildCategories",value:function(e){var t=this;return this.categories.filter((function(r){var n=t.tasks.some((function(e){return e.category===r.cid}));return r.parentcid===e.cid&&n}))}},{key:"getCategoryProgress",value:function(e){var t=this.tasksService.getTasksInCategory(e).map((function(e){return e.progress}));return Math.min.apply(Math,_toConsumableArray(t))}},{key:"filterContent",value:function(e){this.tasks=this.initialTasks.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())})),this.categories=this.initialCategories.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}))}},{key:"parentCategories",get:function(){var e=this,t=_toConsumableArray(this.categories.filter((function(t){var r=e.getChildCategories(t).some((function(t){return e.tasks.some((function(e){return e.category===t.cid}))}));return!t.parentcid&&r})));return this.tasks.some((function(e){return!e.hasCategory()}))&&t.push(l.b),t}},{key:"otherTasks",get:function(){return this.tasks.filter((function(e){return!e.hasCategory()}))}}]),e}(),_.\u0275fac=function(e){return new(e||_)(u.Kb(h.a),u.Kb(l.a))},_.\u0275cmp=u.Eb({type:_,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[["scrollEvents","true","appHideHeader","",3,"fullscreen"],["id","dashboard-search-bar",1,"search-bar"],[3,"ngModel","ngModelChange"],[3,"ionInput"],[3,"tasks",4,"ngIf"],[4,"ngIf"],[3,"tasks"],[4,"ngFor","ngForOf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"gauge-holder"],[3,"percentage"]],template:function(e,t){1&e&&(u.Nb(0,"ion-content",0),u.Lb(1,"app-mood-title"),u.Nb(2,"div",1),u.Nb(3,"ion-checkbox",2),u.Vb("ngModelChange",(function(e){return t.showTasksRatherThanCategories=e})),u.Mb(),u.Nb(4,"ion-searchbar",3),u.Vb("ionInput",(function(e){return t.filterContent(e)})),u.Mb(),u.Mb(),u.nc(5,m,1,1,"app-task-list",4),u.nc(6,w,3,2,"ion-list",5),u.Mb()),2&e&&(u.dc("fullscreen",!0),u.Ab(3),u.dc("ngModel",t.showTasksRatherThanCategories),u.Ab(2),u.dc("ngIf",t.showTasksRatherThanCategories),u.Ab(1),u.dc("ngIf",!t.showTasksRatherThanCategories))},directives:[o.j,g,b,o.i,o.b,i.c,i.d,o.y,o.J,s.k,p.a,o.u,s.j,o.v,o.t,o.p,o.H,c.h,o.l,o.x,y.a],styles:["[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]{transition:height .7s;overflow:hidden;height:0;padding-left:21px;display:flex;align-items:center}[_nghost-%COMP%]   .gauge-holder[_ngcontent-%COMP%]{padding:5px 0}"]}),_)}],S=((M=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:M}),M.\u0275inj=u.Hb({factory:function(e){return new(e||M)},imports:[[c.i.forChild(A)],c.i]}),M),I=r("/hdp"),N=((T=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:T}),T.\u0275inj=u.Hb({factory:function(e){return new(e||T)},imports:[[s.c,i.a,o.D,S,I.a]]}),T)}}]);