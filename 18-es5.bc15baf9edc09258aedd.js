function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{S4AJ:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskDetailPageModule",(function(){return O}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),c=n("mrSG"),s=n("Mwlb"),l=n("fXoL"),u=n("ptfe"),b=function(e,t){return{selected:e,"bi-weekly":t}};function g(e,t){if(1&e){var n=l.Nb();l.Mb(0,"div",1),l.Ub("click",(function(){l.gc(n);var e=t.$implicit;return l.Wb().toggle(e)})),l.mc(1),l.Lb()}if(2&e){var o=t.$implicit,i=l.Wb();l.bc("ngClass",l.ec(2,b,i.week.includes(o.day),!!i.biWeekly)),l.zb(1),l.oc(" ",o.symbol,"\n")}}var f,d=((f=function(){function e(){_classCallCheck(this,e),this.value=[],this.days=[{symbol:"M",day:1},{symbol:"T",day:2},{symbol:"W",day:3},{symbol:"T",day:4},{symbol:"F",day:5},{symbol:"S",day:6},{symbol:"S",day:0}],this.weekChange=new l.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"toggle",value:function(e){this.week=this.week.includes(e.day)?_toConsumableArray(this.week.filter((function(t){return e.day!==t}))):[].concat(_toConsumableArray(this.week),[e.day])}},{key:"week",get:function(){return this.value},set:function(e){this.value=e,this.weekChange.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||f)},f.\u0275cmp=l.Db({type:f,selectors:[["app-week-selector"]],inputs:{week:"week",biWeekly:"biWeekly"},outputs:{weekChange:"weekChange"},decls:1,vars:1,consts:[["class","day",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"day",3,"ngClass","click"]],template:function(e,t){1&e&&l.lc(0,g,2,5,"div",0),2&e&&l.bc("ngForOf",t.days)},directives:[o.j,o.i],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .day[_ngcontent-%COMP%]{border-radius:50%;font-weight:700;width:30px;height:30px;display:flex;justify-content:center;align-items:center;cursor:pointer}[_nghost-%COMP%]   .day.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active{background-color:var(--ion-color-light)}[_nghost-%COMP%]   .day.selected.bi-weekly[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active.bi-weekly{background:linear-gradient(90deg,var(--ion-color-light),var(--ion-color-light) 50%,transparent 0)}"]}),f);function h(e,t){if(1&e){var n=l.Nb();l.Mb(0,"div",13),l.Mb(1,"small"),l.mc(2,"repeats every two weeks "),l.Lb(),l.Mb(3,"ion-toggle",6),l.Ub("ngModelChange",(function(e){return l.gc(n),l.Wb().biWeekly=e})),l.Lb(),l.Lb()}if(2&e){var o=l.Wb();l.zb(3),l.bc("ngModel",o.biWeekly)}}function m(e,t){if(1&e){var n=l.Nb();l.Mb(0,"div",4),l.Mb(1,"div",5),l.mc(2,"When did you last do this?"),l.Lb(),l.Mb(3,"ion-datetime",14),l.Ub("ionChange",(function(e){return l.gc(n),l.Wb().onChange(e)})),l.Lb(),l.Lb()}if(2&e){var o=l.Wb();l.zb(3),l.bc("max",o.now.toISOString())("value",o.lastExecution)}}function y(e,t){if(1&e){var n=l.Nb();l.Mb(0,"ion-button",15),l.Ub("click",(function(){return l.gc(n),l.Wb().create()})),l.mc(1,"Create"),l.Lb()}}function p(e,t){if(1&e){var n=l.Nb();l.Mb(0,"ion-button",15),l.Ub("click",(function(){return l.gc(n),l.Wb().update()})),l.mc(1,"Update"),l.Lb()}}function k(e,t){if(1&e){var n=l.Nb();l.Mb(0,"ion-button",16),l.Ub("click",(function(){return l.gc(n),l.Wb().delete()})),l.mc(1,"Remove this task"),l.Lb()}}var C,M,_,v=[{path:"",component:(C=function(){function e(t,n,o){_classCallCheck(this,e),this.nav=t,this.tasksService=n,this.activatedRoute=o,this.when=[5],this.biWeekly=!1,this.now=new Date,this.task=s.a.createEmpty(),this.new=!0,this.lastExecution=this.now.toISOString()}return _createClass(e,[{key:"onChange",value:function(e){var t=new Date(e.detail.value);this.task.lastDone.setTime(t.getTime()),this.task.computeProgress()}},{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){return Object(c.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.new="new"===t.id,this.new){e.next=5;break}return e.next=3,this.tasksService.getTaskById(t.id);case 3:n=e.sent,this.task=n,this.lastExecution=n.lastDone.toISOString();case 5:this.task.computeProgress();case 6:case"end":return e.stop()}}),e,this)})))}))}},{key:"goBack",value:function(){this.task.computeProgress(),window.history.length>2?this.nav.back():this.nav.navigateBack("/")}},{key:"create",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.new,!e.t0){e.next=5;break}return e.next=4,this.tasksService.createTask(this.task);case 4:this.goBack();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"update",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.new,e.t0){e.next=5;break}return e.next=4,this.tasksService.updateTask(this.task);case 4:this.goBack();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"delete",value:function(){this.new||(this.tasksService.deleteTask(this.task),this.goBack())}}]),e}(),C.\u0275fac=function(e){return new(e||C)(l.Jb(r.t),l.Jb(u.a),l.Jb(a.a))},C.\u0275cmp=l.Db({type:C,selectors:[["app-task-detail"]],decls:20,vars:9,consts:[[3,"fullscreen"],[1,"form"],[1,"cancel-button"],["fill","clear",3,"click"],[1,"form-element"],[1,"title"],[3,"ngModel","ngModelChange"],[3,"biWeekly","week","weekChange"],["class","repeater",4,"ngIf"],["class","form-element",4,"ngIf"],[1,"actions"],["expand","block","color","primary",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click",4,"ngIf"],[1,"repeater"],["displayFormat","DDDD MMM D, YYYY",3,"max","value","ionChange"],["expand","block","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(e,t){1&e&&(l.Mb(0,"ion-content",0),l.Mb(1,"main"),l.Mb(2,"div",1),l.Mb(3,"div",2),l.Mb(4,"ion-button",3),l.Ub("click",(function(){return t.goBack()})),l.mc(5,"Cancel"),l.Lb(),l.Lb(),l.Mb(6,"div",4),l.Mb(7,"div",5),l.mc(8,"Let's give it a name!"),l.Lb(),l.Mb(9,"ion-input",6),l.Ub("ngModelChange",(function(e){return t.task.title=e})),l.Lb(),l.Lb(),l.Mb(10,"div",4),l.Mb(11,"div",5),l.mc(12,"When do you usually do this task?"),l.Lb(),l.Mb(13,"app-week-selector",7),l.Ub("weekChange",(function(e){return t.task.when=e})),l.Lb(),l.lc(14,h,4,1,"div",8),l.Lb(),l.lc(15,m,4,2,"div",9),l.Lb(),l.Mb(16,"div",10),l.lc(17,y,2,0,"ion-button",11),l.lc(18,p,2,0,"ion-button",11),l.lc(19,k,2,0,"ion-button",12),l.Lb(),l.Lb(),l.Lb()),2&e&&(l.bc("fullscreen",!0),l.zb(9),l.bc("ngModel",t.task.title),l.zb(4),l.bc("biWeekly",t.biWeekly)("week",t.task.when),l.zb(1),l.bc("ngIf",!1),l.zb(1),l.bc("ngIf",t.new),l.zb(2),l.bc("ngIf",t.new),l.zb(1),l.bc("ngIf",!t.new),l.zb(1),l.bc("ngIf",!t.new))},directives:[r.e,r.d,r.i,r.x,i.c,i.d,d,o.k,r.q,r.b,r.f,r.w],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;font-weight:700}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{padding:10px 20px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], [_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-light)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding:0 10px!important}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;max-width:70%;padding:20px 0 10px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   app-week-selector[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]{padding-top:20px;width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 40px}"]}),C)}],w=((_=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:_}),_.\u0275inj=l.Gb({factory:function(e){return new(e||_)},imports:[[a.i.forChild(v)],a.i]}),_),O=((M=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:M}),M.\u0275inj=l.Gb({factory:function(e){return new(e||M)},imports:[[o.c,i.a,r.r,w]]}),M)}}]);