(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/2RN":function(t,e,s){"use strict";s.r(e),s.d(e,"DashBoardPageModule",(function(){return L}));var i=s("ofXK"),n=s("3Pt+"),r=s("TEn/"),o=s("tyNb"),a=s("ycII"),c=s("fXoL"),h=s("ptfe"),g=s("mrSG"),l=s("qfBg");let b=(()=>{class t{constructor(t,e,s){this.alertController=t,this.userService=e,this.tasksService=s,this.messages={green:["all lights green, have a break","you're doing well today!","nothing new here, have a break","all lights are green, bravo!","you are the best!"],orange:["a few things to do and you're done","some chores are due today, take it easy","you're almost done for today","swipe it right!"],red:["swipe them right!","did you forget something?","it's time to do them!","I know you can do it!","let's get some work done today!"]},this.message=""}ngOnInit(){this.user=this.userService.getUser(),this.tasksService.getTasks().subscribe(t=>{if(!t||!t.length)return void(this.message="start by creating a task!");let e;e=t.some(t=>t.progress<25)?this.messages.red:t.some(t=>t.progress<50)?this.messages.orange:this.messages.green,this.message=e[Math.floor(Math.random()*e.length)]})}setName(){return Object(g.a)(this,void 0,void 0,(function*(){this.alert&&this.alert.dismiss(),this.alert=yield this.alertController.create({header:"How should I call you?",inputs:[{name:"name",type:"text",id:"name",value:this.userService.getUserName(),placeholder:"Name"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:({name:t})=>{this.userService.setUserName(t)}}]}),this.alert.present()}))}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(r.a),c.Ib(l.a),c.Ib(h.a))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-mood-title"]],decls:6,vars:4,consts:[[3,"click"]],template:function(t,e){1&t&&(c.Lb(0,"h1"),c.mc(1," Hey "),c.Lb(2,"span",0),c.Tb("click",(function(){return e.setName()})),c.mc(3),c.Wb(4,"async"),c.Kb(),c.mc(5),c.Kb()),2&t&&(c.yb(3),c.nc(c.Xb(4,2,e.user).name),c.yb(2),c.oc(", ",e.message,"\n"))},pipes:[i.b],styles:["[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{width:73%;max-width:350px;font-family:var(--tpo-font-family);font-size:var(--tpo-font-big);font-weight:700;line-height:140%;margin:var(--tpo-margin);margin-top:40px}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),t})();var u=s("zRHw"),d=s("uWEj");function p(t,e){if(1&t&&c.Jb(0,"app-task-list",6),2&t){const t=c.Vb();c.bc("tasks",t.tasks)}}const m=function(t){return["/category",t]};function f(t,e){if(1&t&&(c.Lb(0,"ion-item",9),c.Lb(1,"ion-grid"),c.Lb(2,"ion-row"),c.mc(3),c.Kb(),c.Lb(4,"ion-row",10),c.Jb(5,"app-gauge",11),c.Kb(),c.Kb(),c.Kb()),2&t){const t=e.$implicit,s=c.Vb(3);c.bc("routerLink",c.dc(3,m,t.cid)),c.yb(3),c.nc(t.title),c.yb(2),c.bc("percentage",s.getCategoryProgress(t))}}function y(t,e){if(1&t&&(c.Lb(0,"div"),c.Lb(1,"ion-list-header"),c.Lb(2,"ion-label"),c.mc(3),c.Kb(),c.Kb(),c.lc(4,f,6,5,"ion-item",8),c.Kb()),2&t){const t=e.$implicit,s=c.Vb(2);c.yb(3),c.nc(t.title),c.yb(1),c.bc("ngForOf",s.getChildCategories(t))}}function C(t,e){if(1&t&&(c.Lb(0,"ion-list"),c.lc(1,y,5,2,"div",7),c.Jb(2,"app-task-list",6),c.Kb()),2&t){const t=c.Vb();c.yb(1),c.bc("ngForOf",t.parentCategories),c.yb(1),c.bc("tasks",t.otherTasks)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.tasksService=t,this.categoriesService=e,this.categories=[],this.categoryCIDs=[],this.tasks=[],this.initialTasks=[],this.subs=[],this.showTasksRatherThanCategories=!0}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}ionViewWillEnter(){this.$tasks=this.tasksService.getTasks(),this.$categories=this.categoriesService.getCategories();const t=this.$tasks.subscribe(t=>{this.initialTasks=t,this.tasks=t}),e=this.$categories.subscribe(t=>{this.initialCategories=t,this.categories=t});this.subs.push(t,e)}ionViewDidEnter(){this.scroll||this.ionContent.scrollToPoint(0,60)}onScrollEnd(){this.scroll||(this.scroll=!0)}get parentCategories(){const t=[...this.categories.filter(t=>{const e=this.getChildCategories(t).some(t=>this.tasks.some(e=>e.category===t.cid)||this.categoryCIDs.some(e=>t.cid===e));return!t.parentcid&&e})];return this.tasks.some(t=>!t.hasCategory())&&t.push(a.b),t}get otherTasks(){return this.tasks.filter(t=>!t.hasCategory())}getChildCategories(t){return this.categories.filter(e=>{const s=this.tasks.some(t=>t.category===e.cid)||this.categoryCIDs.some(t=>e.cid===t)&&this.initialTasks.some(t=>t.category===e.cid);return e.parentcid===t.cid&&s})}getCategoryProgress(t){const e=this.tasksService.getTasksInCategory(t).map(t=>t.progress);return Math.min(...e)}filterContent(t){this.tasks=this.initialTasks.filter(e=>e.name.toLowerCase().includes(t.target.value.toLowerCase())),this.categoryCIDs=this.initialCategories.filter(e=>e.title.toLowerCase().includes(t.target.value.toLowerCase())).map(t=>t.cid)}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(h.a),c.Ib(a.a))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-dashboard"]],viewQuery:function(t,e){var s;1&t&&c.qc(r.g,!0),2&t&&c.fc(s=c.Ub())&&(e.ionContent=s.first)},decls:7,vars:2,consts:[["scrollEvents","true",3,"ionScrollEnd"],[1,"content"],["id","dashboard-search-bar",1,"search-bar"],[3,"ionInput"],[3,"tasks",4,"ngIf"],[4,"ngIf"],[3,"tasks"],[4,"ngFor","ngForOf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"gauge-holder"],[3,"percentage"]],template:function(t,e){1&t&&(c.Lb(0,"ion-content",0),c.Tb("ionScrollEnd",(function(){return e.onScrollEnd()})),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"ion-searchbar",3),c.Tb("ionInput",(function(t){return e.filterContent(t)})),c.Kb(),c.Kb(),c.Jb(4,"app-mood-title"),c.lc(5,p,1,1,"app-task-list",4),c.lc(6,C,3,2,"ion-list",5),c.Kb(),c.Kb()),2&t&&(c.yb(5),c.bc("ngIf",e.showTasksRatherThanCategories),c.yb(1),c.bc("ngIf",!e.showTasksRatherThanCategories))},directives:[r.g,r.v,r.G,b,i.k,u.a,r.r,i.j,r.s,r.q,r.m,r.E,o.h,r.i,r.u,d.a],styles:["[_nghost-%COMP%]{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{min-height:calc(100vh + 60px - env(safe-area-inset-top) - env(safe-area-inset-bottom))}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center}[_nghost-%COMP%]   .gauge-holder[_ngcontent-%COMP%]{padding:5px 0}"]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(k)],o.i]}),t})();var w=s("/hdp");let L=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[i.c,n.a,r.A,v,w.a]]}),t})()}}]);