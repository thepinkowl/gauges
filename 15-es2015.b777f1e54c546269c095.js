(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{S4AJ:function(n,t,e){"use strict";e.r(t),e.d(t,"TaskDetailPageModule",function(){return _});var i=e("ofXK"),o=e("3Pt+"),c=e("TEn/"),s=e("tyNb"),a=e("mrSG"),r=e("Mwlb"),b=e("fXoL"),l=e("ptfe"),g=e("hMga"),d=e("ycII");function f(n,t){if(1&n&&(b.Pb(0,"ion-select-option",15),b.pc(1),b.Ob()),2&n){const n=t.$implicit;b.fc("value",n.gid),b.Cb(1),b.rc("",n.name," ")}}function u(n,t){if(1&n){const n=b.Qb();b.Pb(0,"div",4),b.Pb(1,"div",5),b.pc(2,"Put it in a group"),b.Ob(),b.Pb(3,"ion-select",14),b.Xb("ngModelChange",function(t){return b.kc(n),b.Zb().task.gid=t}),b.oc(4,f,2,2,"ion-select-option",10),b.ac(5,"async"),b.Ob(),b.Ob()}if(2&n){const n=b.Zb();b.Cb(3),b.fc("ngModel",n.task.gid),b.Cb(1),b.fc("ngForOf",b.bc(5,2,n.groupsService.groups))}}function p(n,t){if(1&n&&(b.Pb(0,"ion-select-option",15),b.pc(1),b.Ob()),2&n){const n=t.$implicit;b.fc("value",n.cid),b.Cb(1),b.sc(" ",n.parentcid&&"\u2013\u2013"," ",n.title," ")}}function O(n,t){if(1&n){const n=b.Qb();b.Pb(0,"div",4),b.Pb(1,"div",5),b.pc(2,"When did you last do this?"),b.Ob(),b.Pb(3,"ion-datetime",16),b.Xb("ionChange",function(t){return b.kc(n),b.Zb().onChange(t)}),b.Ob(),b.Ob()}if(2&n){const n=b.Zb();b.Cb(3),b.fc("max",n.now.toISOString())("value",n.lastExecution)}}function h(n,t){if(1&n){const n=b.Qb();b.Pb(0,"ion-item-sliding"),b.Pb(1,"ion-item"),b.Pb(2,"ion-label"),b.pc(3),b.Ob(),b.Ob(),b.Pb(4,"ion-item-options",19),b.Pb(5,"ion-item-option",20),b.Xb("click",function(e){b.kc(n);const i=t.index;return b.Zb(2).deleteTime(e,i)}),b.pc(6,"delete"),b.Ob(),b.Ob(),b.Ob()}if(2&n){const n=t.$implicit;b.Cb(3),b.sc("",n.toLocaleDateString()," ",n.toLocaleTimeString(),"")}}function P(n,t){if(1&n&&(b.Pb(0,"div",4),b.Pb(1,"div",5),b.pc(2,"Last executions (showing 5 most recent)"),b.Ob(),b.Pb(3,"ion-list",17),b.oc(4,h,7,2,"ion-item-sliding",18),b.ac(5,"slice"),b.Ob(),b.Ob()),2&n){const n=b.Zb();b.Cb(4),b.fc("ngForOf",b.cc(5,1,n.task.executions,0,5))}}function m(n,t){if(1&n){const n=b.Qb();b.Pb(0,"ion-button",21),b.Xb("click",function(){return b.kc(n),b.Zb().create()}),b.pc(1,"Create"),b.Ob()}}function C(n,t){if(1&n){const n=b.Qb();b.Pb(0,"ion-button",21),b.Xb("click",function(){return b.kc(n),b.Zb().update()}),b.pc(1,"Update"),b.Ob()}}function M(n,t){if(1&n){const n=b.Qb();b.Pb(0,"ion-button",22),b.Xb("click",function(){return b.kc(n),b.Zb().delete()}),b.pc(1,"Remove this task"),b.Ob()}}const k=[{path:"",component:(()=>{class n{constructor(n,t,e,i,o){this.nav=n,this.tasksService=t,this.groupsService=e,this.categoriesService=i,this.activatedRoute=o,this.now=new Date,this.task=r.a.createEmpty(),this.new=!0,this.lastExecution=this.now.toISOString(),this.groupsService.groups.subscribe(n=>{this.new&&(this.task.gid=n[0].gid)})}onChange(n){const t=new Date(n.detail.value);this.task.executions=[t],this.task.computeProgress()}deleteTime(n,t){this.lastExecution=void 0;const e=[...this.task.executions];e.splice(t,1),this.task.executions=e}ngOnInit(){this.activatedRoute.params.subscribe(n=>Object(a.a)(this,void 0,void 0,function*(){if(this.new="new"===n.id,!this.new){const t=yield this.tasksService.getTaskById(n.id);this.task=t,this.lastExecution=t.lastDone.toISOString()}this.task.computeProgress()}))}goBack(){this.task.computeProgress(),window.history.length>2?this.nav.back():this.nav.navigateBack("/")}create(){return Object(a.a)(this,void 0,void 0,function*(){if(this.new){if(!this.task.gid||""===this.task.gid)return;yield this.tasksService.createTask(this.task),this.goBack()}})}update(){return Object(a.a)(this,void 0,void 0,function*(){this.new||(yield this.tasksService.updateTask(this.task),this.goBack())})}delete(){this.new||(this.tasksService.deleteTask(this.task),this.goBack())}}return n.\u0275fac=function(t){return new(t||n)(b.Mb(c.C),b.Mb(l.a),b.Mb(g.a),b.Mb(d.a),b.Mb(s.a))},n.\u0275cmp=b.Gb({type:n,selectors:[["app-task-detail"]],decls:32,vars:13,consts:[[3,"fullscreen"],[1,"form"],[1,"cancel-button"],["fill","clear",3,"click"],[1,"form-element"],[1,"title"],[3,"ngModel","ngModelChange"],["class","form-element",4,"ngIf"],[1,"repeat-selector"],["placeholder","Tag",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["expand","block","color","primary",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click",4,"ngIf"],["placeholder","Group",3,"ngModel","ngModelChange"],[3,"value"],["displayFormat","DDDD MMM D, YYYY",3,"max","value","ionChange"],["id","history"],[4,"ngFor","ngForOf"],["side","end"],["color","danger",3,"click"],["expand","block","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(n,t){1&n&&(b.Pb(0,"ion-content",0),b.Pb(1,"main"),b.Pb(2,"div",1),b.Pb(3,"div",2),b.Pb(4,"ion-button",3),b.Xb("click",function(){return t.goBack()}),b.pc(5,"Cancel"),b.Ob(),b.Ob(),b.Pb(6,"div",4),b.Pb(7,"div",5),b.pc(8,"Let's give it a name!"),b.Ob(),b.Pb(9,"ion-input",6),b.Xb("ngModelChange",function(n){return t.task.name=n}),b.Ob(),b.Ob(),b.oc(10,u,6,4,"div",7),b.Pb(11,"div",4),b.Pb(12,"div",5),b.pc(13,"When do you usually do this task?"),b.Ob(),b.Pb(14,"div",8),b.Pb(15,"span"),b.pc(16," Every "),b.Ob(),b.Pb(17,"ion-input",6),b.Xb("ngModelChange",function(n){return t.task.repeat=n}),b.Ob(),b.Pb(18,"span"),b.pc(19," days "),b.Ob(),b.Ob(),b.Ob(),b.Pb(20,"div",4),b.Pb(21,"div",5),b.pc(22,"A tag, maybe?"),b.Ob(),b.Pb(23,"ion-select",9),b.Xb("ngModelChange",function(n){return t.task.category=n}),b.oc(24,p,2,3,"ion-select-option",10),b.ac(25,"async"),b.Ob(),b.Ob(),b.oc(26,O,4,2,"div",7),b.oc(27,P,6,5,"div",7),b.Ob(),b.Pb(28,"div",11),b.oc(29,m,2,0,"ion-button",12),b.oc(30,C,2,0,"ion-button",12),b.oc(31,M,2,0,"ion-button",13),b.Ob(),b.Ob(),b.Ob()),2&n&&(b.fc("fullscreen",!0),b.Cb(9),b.fc("ngModel",t.task.name),b.Cb(1),b.fc("ngIf",t.new),b.Cb(7),b.fc("ngModel",t.task.repeat),b.Cb(6),b.fc("ngModel",t.task.category),b.Cb(1),b.fc("ngForOf",b.bc(25,11,t.categoriesService.categories)),b.Cb(2),b.fc("ngIf",t.new||0===t.task.executions.length),b.Cb(1),b.fc("ngIf",!t.new&&0!==t.task.executions.length),b.Cb(2),b.fc("ngIf",t.new),b.Cb(1),b.fc("ngIf",!t.new),b.Cb(1),b.fc("ngIf",!t.new))},directives:[c.g,c.e,c.l,c.G,o.d,o.e,i.k,c.w,c.F,i.j,c.x,c.h,c.r,c.p,c.m,c.q,c.o,c.n],pipes:[i.b,i.o],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;font-weight:700}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{padding:10px 20px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], [_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-light)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding:0 10px!important}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;max-width:70%;padding:20px 0 10px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   div.repeat-selector[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   div.repeat-selector[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:0 10px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 40px}"]}),n})()}];let v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=b.Kb({type:n}),n.\u0275inj=b.Jb({imports:[[s.i.forChild(k)],s.i]}),n})(),_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=b.Kb({type:n}),n.\u0275inj=b.Jb({imports:[[i.c,o.a,c.A,v]]}),n})()}}]);