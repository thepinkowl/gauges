(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/2RN":function(e,t,s){"use strict";s.r(t),s.d(t,"DashBoardPageModule",(function(){return M}));var i=s("ofXK"),a=s("3Pt+"),o=s("TEn/"),n=s("tyNb"),r=s("ycII"),c=s("fXoL"),h=s("ptfe"),g=s("mrSG"),l=s("qfBg");let d=(()=>{class e{constructor(e,t,s){this.alertController=e,this.userService=t,this.tasksService=s,this.messages={green:["all lights green, have a break","you're doing well today!","nothing new here, have a break","all lights are green, bravo!","you are the best!"],orange:["a few things to do and you're done","some chores are due today, take it easy","you're almost done for today","swipe it right!"],red:["swipe them right!","did you forget something?","it's time to do them!","I know you can do it!","let's get some work done today!"]},this.message=""}ngOnInit(){this.user=this.userService.getUser(),this.tasksService.getTasks().subscribe(e=>{if(!e||!e.length)return void(this.message="start by creating a task!");let t;t=e.some(e=>e.progress<25)?this.messages.red:e.some(e=>e.progress<50)?this.messages.orange:this.messages.green,this.message=t[Math.floor(Math.random()*t.length)]})}setName(){return Object(g.__awaiter)(this,void 0,void 0,(function*(){this.alert&&this.alert.dismiss(),this.alert=yield this.alertController.create({header:"How should I call you?",inputs:[{name:"name",type:"text",id:"name",value:this.userService.getUserName(),placeholder:"Name"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:({name:e})=>{this.userService.setUserName(e)}}]}),this.alert.present()}))}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(o.a),c.Kb(l.a),c.Kb(h.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-mood-title"]],decls:6,vars:4,consts:[[3,"click"]],template:function(e,t){1&e&&(c.Nb(0,"h1"),c.oc(1," Hey "),c.Nb(2,"span",0),c.Vb("click",(function(){return t.setName()})),c.oc(3),c.Yb(4,"async"),c.Mb(),c.oc(5),c.Mb()),2&e&&(c.Ab(3),c.pc(c.Zb(4,2,t.user).name),c.Ab(2),c.qc(", ",t.message,"\n"))},pipes:[i.b],styles:["[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{width:73%;max-width:350px;font-family:var(--tpo-font-family);font-size:var(--tpo-font-big);font-weight:700;line-height:140%;margin:var(--tpo-margin);margin-top:40px}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),e})();var b=s("zRHw"),u=s("uWEj");function p(e,t){if(1&e&&c.Lb(0,"app-task-list",6),2&e){const e=c.Xb();c.dc("tasks",e.tasks)}}const m=function(e){return["/category",e]};function f(e,t){if(1&e&&(c.Nb(0,"ion-item",9),c.Nb(1,"ion-grid"),c.Nb(2,"ion-row"),c.oc(3),c.Mb(),c.Nb(4,"ion-row",10),c.Lb(5,"app-gauge",11),c.Mb(),c.Mb(),c.Mb()),2&e){const e=t.$implicit,s=c.Xb(3);c.dc("routerLink",c.fc(3,m,e.cid)),c.Ab(3),c.pc(e.title),c.Ab(2),c.dc("percentage",s.getCategoryProgress(e))}}function k(e,t){if(1&e&&(c.Nb(0,"div"),c.Nb(1,"ion-list-header"),c.Nb(2,"ion-label"),c.oc(3),c.Mb(),c.Mb(),c.nc(4,f,6,5,"ion-item",8),c.Mb()),2&e){const e=t.$implicit,s=c.Xb(2);c.Ab(3),c.pc(e.title),c.Ab(1),c.dc("ngForOf",s.getChildCategories(e))}}function C(e,t){if(1&e&&(c.Nb(0,"ion-list"),c.nc(1,k,5,2,"div",7),c.Lb(2,"app-task-list",6),c.Mb()),2&e){const e=c.Xb();c.Ab(1),c.dc("ngForOf",e.parentCategories),c.Ab(1),c.dc("tasks",e.otherTasks)}}const y=[{path:"",component:(()=>{class e{constructor(e,t,s){this.tasksService=e,this.categoriesService=t,this.el=s,this.categories=[],this.categoryCIDs=[],this.tasks=[],this.initialTasks=[],this.subs=[],this.showTasksRatherThanCategories=!1}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ionViewWillEnter(){this.$tasks=this.tasksService.getTasks(),this.$categories=this.categoriesService.getCategories();const e=this.$tasks.subscribe(e=>{this.initialTasks=e,this.tasks=e}),t=this.$categories.subscribe(e=>{this.initialCategories=e,this.categories=e});this.subs.push(e,t)}ionViewDidEnter(){this.scrollPage(60)}scrollPage(e){[...this.el.nativeElement.firstChild.shadowRoot.childNodes].find(e=>e.className.includes("inner-scroll")).scrollTop=e}get parentCategories(){let e=[...this.categories.filter(e=>{const t=this.getChildCategories(e).some(e=>this.tasks.some(t=>t.category===e.cid)||this.categoryCIDs.some(t=>e.cid===t));return!e.parentcid&&t})];return this.tasks.some(e=>!e.hasCategory())&&e.push(r.b),e}get otherTasks(){return this.tasks.filter(e=>!e.hasCategory())}getChildCategories(e){return this.categories.filter(t=>{const s=this.tasks.some(e=>e.category===t.cid)||this.categoryCIDs.some(e=>t.cid===e)&&this.initialTasks.some(e=>e.category===t.cid);return t.parentcid===e.cid&&s})}getCategoryProgress(e){const t=this.tasksService.getTasksInCategory(e).map(e=>e.progress);return Math.min(...t)}filterContent(e){this.tasks=this.initialTasks.filter(t=>t.name.toLowerCase().includes(e.target.value.toLowerCase())),this.categoryCIDs=this.initialCategories.filter(t=>t.title.toLowerCase().includes(e.target.value.toLowerCase())).map(e=>e.cid)}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(h.a),c.Kb(r.a),c.Kb(c.l))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-dashboard"]],decls:8,vars:3,consts:[[1,"content"],["id","dashboard-search-bar",1,"search-bar"],[3,"ngModel","ngModelChange"],[3,"ionInput"],[3,"tasks",4,"ngIf"],[4,"ngIf"],[3,"tasks"],[4,"ngFor","ngForOf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"gauge-holder"],[3,"percentage"]],template:function(e,t){1&e&&(c.Nb(0,"ion-content"),c.Nb(1,"div",0),c.Nb(2,"div",1),c.Nb(3,"ion-checkbox",2),c.Vb("ngModelChange",(function(e){return t.showTasksRatherThanCategories=e})),c.Mb(),c.Nb(4,"ion-searchbar",3),c.Vb("ionInput",(function(e){return t.filterContent(e)})),c.Mb(),c.Mb(),c.Lb(5,"app-mood-title"),c.nc(6,p,1,1,"app-task-list",4),c.nc(7,C,3,2,"ion-list",5),c.Mb(),c.Mb()),2&e&&(c.Ab(3),c.dc("ngModel",t.showTasksRatherThanCategories),c.Ab(3),c.dc("ngIf",t.showTasksRatherThanCategories),c.Ab(1),c.dc("ngIf",!t.showTasksRatherThanCategories))},directives:[o.i,o.h,o.b,a.c,a.d,o.x,o.I,d,i.k,b.a,o.t,i.j,o.u,o.s,o.o,o.G,n.h,o.k,o.w,u.a],styles:["[_nghost-%COMP%]{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{min-height:calc(100vh + 60px - env(safe-area-inset-top) - env(safe-area-inset-bottom))}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]{height:60px;padding-left:21px;display:flex;align-items:center}[_nghost-%COMP%]   .gauge-holder[_ngcontent-%COMP%]{padding:5px 0}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(y)],n.i]}),e})();var w=s("/hdp");let M=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.C,v,w.a]]}),e})()}}]);