(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/2RN":function(t,e,s){"use strict";s.r(e),s.d(e,"DashBoardPageModule",(function(){return M}));var i=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),r=s("tyNb"),a=s("ycII"),c=s("fXoL"),h=s("ptfe"),g=s("mrSG"),l=s("qfBg");let b=(()=>{class t{constructor(t,e,s){this.alertController=t,this.userService=e,this.tasksService=s,this.messages={green:["all lights green, have a break","you're doing well today!","nothing new here, have a break","all lights are green, bravo!","you are the best!"],orange:["a few things to do and you're done","some chores are due today, take it easy","you're almost done for today","swipe it right!"],red:["swipe them right!","did you forget something?","it's time to do them!","I know you can do it!","let's get some work done today!"]},this.message=""}ngOnInit(){this.user=this.userService.getUser(),this.tasksService.getTasks().subscribe(t=>{if(!t||!t.length)return void(this.message="start by creating a task!");let e;e=t.some(t=>t.progress<25)?this.messages.red:t.some(t=>t.progress<50)?this.messages.orange:this.messages.green,this.message=e[Math.floor(Math.random()*e.length)]})}setName(){return Object(g.__awaiter)(this,void 0,void 0,(function*(){this.alert&&this.alert.dismiss(),this.alert=yield this.alertController.create({header:"How should I call you?",inputs:[{name:"name",type:"text",id:"name",value:this.userService.getUserName(),placeholder:"Name"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:({name:t})=>{this.userService.setUserName(t)}}]}),this.alert.present()}))}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(o.a),c.Kb(l.a),c.Kb(h.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-mood-title"]],decls:6,vars:4,consts:[[3,"click"]],template:function(t,e){1&t&&(c.Nb(0,"h1"),c.oc(1," Hey "),c.Nb(2,"span",0),c.Vb("click",(function(){return e.setName()})),c.oc(3),c.Yb(4,"async"),c.Mb(),c.oc(5),c.Mb()),2&t&&(c.Ab(3),c.pc(c.Zb(4,2,e.user).name),c.Ab(2),c.qc(", ",e.message,"\n"))},pipes:[i.b],styles:["[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{width:73%;max-width:350px;font-family:var(--tpo-font-family);font-size:var(--tpo-font-big);font-weight:700;line-height:140%;margin:var(--tpo-margin);margin-top:40px}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),t})();var d=s("zRHw"),u=s("uWEj");function p(t,e){if(1&t&&c.Lb(0,"app-task-list",7),2&t){const t=c.Xb();c.dc("tasks",t.tasks)}}const f=function(t){return["/category",t]};function m(t,e){if(1&t&&(c.Nb(0,"ion-item",10),c.Nb(1,"ion-grid"),c.Nb(2,"ion-row"),c.oc(3),c.Mb(),c.Nb(4,"ion-row",11),c.Lb(5,"app-gauge",12),c.Mb(),c.Mb(),c.Mb()),2&t){const t=e.$implicit,s=c.Xb(3);c.dc("routerLink",c.fc(3,f,t.cid)),c.Ab(3),c.pc(t.title),c.Ab(2),c.dc("percentage",s.getCategoryProgress(t))}}function k(t,e){if(1&t&&(c.Nb(0,"div"),c.Nb(1,"ion-list-header"),c.Nb(2,"ion-label"),c.oc(3),c.Mb(),c.Mb(),c.nc(4,m,6,5,"ion-item",9),c.Mb()),2&t){const t=e.$implicit,s=c.Xb(2);c.Ab(3),c.pc(t.title),c.Ab(1),c.dc("ngForOf",s.getChildCategories(t))}}function C(t,e){if(1&t&&(c.Nb(0,"ion-list"),c.nc(1,k,5,2,"div",8),c.Lb(2,"app-task-list",7),c.Mb()),2&t){const t=c.Xb();c.Ab(1),c.dc("ngForOf",t.parentCategories),c.Ab(1),c.dc("tasks",t.otherTasks)}}const y=[{path:"",component:(()=>{class t{constructor(t,e){this.tasksService=t,this.categoriesService=e,this.categories=[],this.categoryCIDs=[],this.tasks=[],this.initialTasks=[],this.subs=[],this.showTasksRatherThanCategories=!1}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}ionViewWillEnter(){this.$tasks=this.tasksService.getTasks(),this.$categories=this.categoriesService.getCategories();const t=this.$tasks.subscribe(t=>{this.initialTasks=t,this.tasks=t}),e=this.$categories.subscribe(t=>{this.initialCategories=t,this.categories=t});this.subs.push(t,e)}ionViewDidEnter(){this.scroll||this.ionContent.scrollToPoint(0,60)}onScrollEnd(){this.scroll||(this.scroll=!0)}get parentCategories(){let t=[...this.categories.filter(t=>{const e=this.getChildCategories(t).some(t=>this.tasks.some(e=>e.category===t.cid)||this.categoryCIDs.some(e=>t.cid===e));return!t.parentcid&&e})];return this.tasks.some(t=>!t.hasCategory())&&t.push(a.b),t}get otherTasks(){return this.tasks.filter(t=>!t.hasCategory())}getChildCategories(t){return this.categories.filter(e=>{const s=this.tasks.some(t=>t.category===e.cid)||this.categoryCIDs.some(t=>e.cid===t)&&this.initialTasks.some(t=>t.category===e.cid);return e.parentcid===t.cid&&s})}getCategoryProgress(t){const e=this.tasksService.getTasksInCategory(t).map(t=>t.progress);return Math.min(...e)}filterContent(t){this.tasks=this.initialTasks.filter(e=>e.name.toLowerCase().includes(t.target.value.toLowerCase())),this.categoryCIDs=this.initialCategories.filter(e=>e.title.toLowerCase().includes(t.target.value.toLowerCase())).map(t=>t.cid)}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(h.a),c.Kb(a.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-dashboard"]],viewQuery:function(t,e){var s;1&t&&c.sc(o.i,!0),2&t&&c.hc(s=c.Wb())&&(e.ionContent=s.first)},decls:8,vars:3,consts:[["scrollEvents","true",3,"ionScrollEnd"],[1,"content"],["id","dashboard-search-bar",1,"search-bar"],[3,"ngModel","ngModelChange"],[3,"ionInput"],[3,"tasks",4,"ngIf"],[4,"ngIf"],[3,"tasks"],[4,"ngFor","ngForOf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"gauge-holder"],[3,"percentage"]],template:function(t,e){1&t&&(c.Nb(0,"ion-content",0),c.Vb("ionScrollEnd",(function(){return e.onScrollEnd()})),c.Nb(1,"div",1),c.Nb(2,"div",2),c.Nb(3,"ion-checkbox",3),c.Vb("ngModelChange",(function(t){return e.showTasksRatherThanCategories=t})),c.Mb(),c.Nb(4,"ion-searchbar",4),c.Vb("ionInput",(function(t){return e.filterContent(t)})),c.Mb(),c.Mb(),c.Lb(5,"app-mood-title"),c.nc(6,p,1,1,"app-task-list",5),c.nc(7,C,3,2,"ion-list",6),c.Mb(),c.Mb()),2&t&&(c.Ab(3),c.dc("ngModel",e.showTasksRatherThanCategories),c.Ab(3),c.dc("ngIf",e.showTasksRatherThanCategories),c.Ab(1),c.dc("ngIf",!e.showTasksRatherThanCategories))},directives:[o.i,o.h,o.b,n.c,n.d,o.x,o.I,b,i.k,d.a,o.t,i.j,o.u,o.s,o.o,o.G,r.h,o.k,o.w,u.a],styles:["[_nghost-%COMP%]{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{min-height:calc(100vh + 60px - env(safe-area-inset-top) - env(safe-area-inset-bottom))}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]{height:60px;padding-left:21px;display:flex;align-items:center}[_nghost-%COMP%]   .gauge-holder[_ngcontent-%COMP%]{padding:5px 0}"]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(y)],r.i]}),t})();var w=s("/hdp");let M=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[i.c,n.a,o.C,v,w.a]]}),t})()}}]);