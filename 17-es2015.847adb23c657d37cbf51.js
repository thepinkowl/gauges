(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{S4AJ:function(n,t,e){"use strict";e.r(t),e.d(t,"TaskDetailPageModule",(function(){return y}));var o=e("ofXK"),i=e("3Pt+"),c=e("TEn/"),s=e("tyNb"),a=e("mrSG"),l=e("Mwlb"),r=e("fXoL"),g=e("ptfe");const b=function(n,t){return{selected:n,"bi-weekly":t}};function d(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div",1),r.Ub("click",(function(){r.gc(n);const e=t.$implicit;return r.Wb().toggle(e)})),r.kc(1),r.Lb()}if(2&n){const n=t.$implicit,e=r.Wb();r.bc("ngClass",r.ec(2,b,e.week.includes(n.day),!!e.biWeekly)),r.zb(1),r.mc(" ",n.symbol,"\n")}}let f=(()=>{class n{constructor(){this.value=[],this.days=[{symbol:"M",day:1},{symbol:"T",day:2},{symbol:"W",day:3},{symbol:"T",day:4},{symbol:"F",day:5},{symbol:"S",day:6},{symbol:"S",day:0}],this.weekChange=new r.n}get week(){return this.value}set week(n){this.value=n,this.weekChange.emit(n)}ngOnInit(){}toggle(n){this.week=this.week.includes(n.day)?[...this.week.filter(t=>n.day!==t)]:[...this.week,n.day]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Db({type:n,selectors:[["app-week-selector"]],inputs:{week:"week",biWeekly:"biWeekly"},outputs:{weekChange:"weekChange"},decls:1,vars:1,consts:[["class","day",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"day",3,"ngClass","click"]],template:function(n,t){1&n&&r.jc(0,d,2,5,"div",0),2&n&&r.bc("ngForOf",t.days)},directives:[o.j,o.i],styles:["[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .day[_ngcontent-%COMP%]{border-radius:50%;font-weight:700;width:30px;height:30px;display:flex;justify-content:center;align-items:center;cursor:pointer}[_nghost-%COMP%]   .day.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active{background-color:var(--ion-color-light)}[_nghost-%COMP%]   .day.selected.bi-weekly[_ngcontent-%COMP%], [_nghost-%COMP%]   .day[_ngcontent-%COMP%]:active.bi-weekly{background:linear-gradient(90deg,var(--ion-color-light),var(--ion-color-light) 50%,transparent 0)}"]}),n})();function h(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div",13),r.Mb(1,"small"),r.kc(2,"repeats every two weeks "),r.Lb(),r.Mb(3,"ion-toggle",6),r.Ub("ngModelChange",(function(t){return r.gc(n),r.Wb().biWeekly=t})),r.Lb(),r.Lb()}if(2&n){const n=r.Wb();r.zb(3),r.bc("ngModel",n.biWeekly)}}function u(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div",4),r.Mb(1,"div",5),r.kc(2,"When did you last do this?"),r.Lb(),r.Mb(3,"ion-datetime",14),r.Ub("ionChange",(function(t){return r.gc(n),r.Wb().onChange(t)})),r.Lb(),r.Lb()}if(2&n){const n=r.Wb();r.zb(3),r.bc("max",n.now.toISOString())("value",n.lastExecution)}}function M(n,t){if(1&n){const n=r.Nb();r.Mb(0,"ion-button",15),r.Ub("click",(function(){return r.gc(n),r.Wb().create()})),r.kc(1,"Create"),r.Lb()}}function k(n,t){if(1&n){const n=r.Nb();r.Mb(0,"ion-button",15),r.Ub("click",(function(){return r.gc(n),r.Wb().update()})),r.kc(1,"Update"),r.Lb()}}function m(n,t){if(1&n){const n=r.Nb();r.Mb(0,"ion-button",16),r.Ub("click",(function(){return r.gc(n),r.Wb().delete()})),r.kc(1,"Remove this task"),r.Lb()}}const C=[{path:"",component:(()=>{class n{constructor(n,t,e){this.nav=n,this.tasksService=t,this.activatedRoute=e,this.when=[5],this.biWeekly=!1,this.now=new Date,this.task=l.a.createEmpty(),this.new=!0,this.lastExecution=this.now.toISOString()}onChange(n){const t=new Date(n.detail.value);this.task.lastDone.setTime(t.getTime()),this.task.computeProgress()}ngOnInit(){this.activatedRoute.params.subscribe(n=>Object(a.a)(this,void 0,void 0,(function*(){if(this.new="new"===n.id,!this.new){const t=yield this.tasksService.getTaskById(n.id);this.task=t,this.lastExecution=t.lastDone.toISOString()}this.task.computeProgress()})))}goBack(){window.history.length>2?this.nav.back():this.nav.navigateBack("/")}create(){return Object(a.a)(this,void 0,void 0,(function*(){this.new&&(yield this.tasksService.createTask(this.task),this.goBack())}))}update(){return Object(a.a)(this,void 0,void 0,(function*(){this.new||(yield this.tasksService.updateTask(this.task),this.goBack())}))}delete(){this.new||(this.tasksService.deleteTask(this.task),this.goBack())}}return n.\u0275fac=function(t){return new(t||n)(r.Jb(c.t),r.Jb(g.a),r.Jb(s.a))},n.\u0275cmp=r.Db({type:n,selectors:[["app-task-detail"]],decls:20,vars:9,consts:[[3,"fullscreen"],[1,"form"],[1,"cancel-button"],["fill","clear",3,"click"],[1,"form-element"],[1,"title"],[3,"ngModel","ngModelChange"],[3,"biWeekly","week","weekChange"],["class","repeater",4,"ngIf"],["class","form-element",4,"ngIf"],[1,"actions"],["expand","block","color","primary",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click",4,"ngIf"],[1,"repeater"],["displayFormat","DDDD MMM D, YYYY",3,"max","value","ionChange"],["expand","block","color","primary",3,"click"],["fill","clear","color","danger",3,"click"]],template:function(n,t){1&n&&(r.Mb(0,"ion-content",0),r.Mb(1,"main"),r.Mb(2,"div",1),r.Mb(3,"div",2),r.Mb(4,"ion-button",3),r.Ub("click",(function(){return t.goBack()})),r.kc(5,"Cancel"),r.Lb(),r.Lb(),r.Mb(6,"div",4),r.Mb(7,"div",5),r.kc(8,"Let's give it a name!"),r.Lb(),r.Mb(9,"ion-input",6),r.Ub("ngModelChange",(function(n){return t.task.title=n})),r.Lb(),r.Lb(),r.Mb(10,"div",4),r.Mb(11,"div",5),r.kc(12,"When do you usually do this task?"),r.Lb(),r.Mb(13,"app-week-selector",7),r.Ub("weekChange",(function(n){return t.task.when=n})),r.Lb(),r.jc(14,h,4,1,"div",8),r.Lb(),r.jc(15,u,4,2,"div",9),r.Lb(),r.Mb(16,"div",10),r.jc(17,M,2,0,"ion-button",11),r.jc(18,k,2,0,"ion-button",11),r.jc(19,m,2,0,"ion-button",12),r.Lb(),r.Lb(),r.Lb()),2&n&&(r.bc("fullscreen",!0),r.zb(9),r.bc("ngModel",t.task.title),r.zb(4),r.bc("biWeekly",t.biWeekly)("week",t.task.when),r.zb(1),r.bc("ngIf",!1),r.zb(1),r.bc("ngIf",t.new),r.zb(2),r.bc("ngIf",t.new),r.zb(1),r.bc("ngIf",!t.new),r.zb(1),r.bc("ngIf",!t.new))},directives:[c.e,c.d,c.i,c.x,i.c,i.d,f,o.k,c.q,c.b,c.f,c.w],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding-bottom:calc(env(safe-area-inset-bottom) + 10px)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;font-weight:700}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]{padding:10px 20px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], [_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-light)}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding:0 10px!important}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;max-width:70%;padding:20px 0 10px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   app-week-selector[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]{padding-top:20px;width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-element[_ngcontent-%COMP%]   .repeater[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 40px}"]}),n})()}];let p=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[s.i.forChild(C)],s.i]}),n})(),y=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[o.c,i.a,c.r,p]]}),n})()}}]);